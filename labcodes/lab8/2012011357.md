# Lab8 report

## [练习1]
完成读文件操作的实现

1-1 请在实验报告中给出设计实现”UNIX的PIPE机制“的概要设计方案
```
定义两个函数，管道读函数 pipe_read()和管道写函数pipe_wrtie()。管道写函数通过将字节复制到VFS索引节点指向的物理内存而
写入数据，而管道读函数则通过复制物理内存中的字节而读出数据。内核必须利用一定的机制同步对管道的访问，为此，内核使用了
锁、等待队列和信号。当写进程向管道中写入时，利用标准的库函数write()，系统根据库函数传递的文件描述符，可找到该文件的
file结构。file结构中指定了用来进行写操作的函数（即写入函数）地址，于是，内核调用该函数完成写操作。写入函数在向内存中
写入数据之前，必须首先检查 VFS 索引节点中的信息，同时满足如下条件时，才能进行实际的内存复制工作：
    内存中有足够的空间可容纳所有要写入的数据；
    内存没有被读程序锁定。
如果同时满足上述条件，写入函数首先锁定内存，然后从写进程的地址空间中复制数据到内存。否则，写入进程就休眠在VFS索引节
点的等待队列中，接下来，内核将调用调度程序，而调度程序会选择其他进程运行。写入进程实际处于可中断的等待状态，当内存中
有足够的空间可以容纳写入数据，或内存被解锁时，读取进程会唤醒写入进程，这时，写入进程将接收到信号。当数据写入内存之后，
内存被解锁，而所有休眠在索引节点的读取进程会被唤醒。管道的读取过程和写入过程类似。但是，进程可以在没有数据或内存被锁
定时立即返回错误信息，而不是阻塞该进程，这依赖于文件或管道的打开模式。反之，进程可以休眠在索引节点的等待队列中等待写
入进程写入数据。当所有的进程完成了管道操作之后，管道的索引节点被丢弃，而共享数据页也被释放。
```

## [练习2]
完成基于文件系统的执行程序机制的实现

2-1 请在实验报告中给出设计实现基于”UNIX的硬链接和软链接机制“的概要设计方案
```
硬链接：创建文件时，直接在inode中把其磁盘inode位置指向实际的那个文件的磁盘inode位置。
软链接：创建文件时，创建一个实际的文件，把其属性标记为软链接，文件中存储其指向的文件位置。打开文件时，若发现其属性为
        软链接，则打开其指向的位置，直至打开的文件不是软链接或达到迭代上限为止。
```

## [与参考答案的区别]
```
思路上没有太大区别，具体代码上略有区别。
```

## [实验中重要的知识点]
```
读文件
执行程序
```

